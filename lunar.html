<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>양력 → 음력 변환기</title>
</head>
<body>
  <h3>양력을 음력으로 변환하기</h3>
  <input type="date" id="solarInput" />
  <button onclick="convertToLunar()">변환</button>
  <p id="result"></p>

  <script>
    async function convertToLunar() {
      const solarDate = document.getElementById("solarInput").value;
      if (!solarDate) {
        document.getElementById("result").innerText = "날짜를 선택하세요.";
        return;
      }

      const [y, m, d] = solarDate.split("-");
      const apiUrl = `https://astro.kasi.re.kr/openapi/service/Life/SpcConv?solYear=${y}&solMonth=${m}&solDay=${d}&serviceKey=여기에_API_KEY&_type=json`;

      try {
        const res = await fetch(apiUrl);
        const data = await res.json();
        const item = data.response.body.items.item;

        if (item) {
          const lunarDate = `${item.lunYear}-${item.lunMonth.padStart(2, "0")}-${item.lunDay.padStart(2, "0")}`;
          const leap = item.leapMonth === "1" ? " (윤달)" : "";
          document.getElementById("result").innerText = `음력: ${lunarDate}${leap}`;
        } else {
          document.getElementById("result").innerText = "결과를 불러올 수 없습니다.";
        }
      } catch (e) {
        document.getElementById("result").innerText = "API 오류 발생";
      }
    }
  </script>
</body>
</html>